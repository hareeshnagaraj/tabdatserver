{"_id":"file-utils","_rev":"18-ac491b4a3b367b08520f91d5015e4b3b","name":"file-utils","description":"Sync file utility for Node.js command line tools","dist-tags":{"latest":"0.2.0"},"versions":{"0.0.1":{"name":"file-utils","version":"0.0.1","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.0.1","dist":{"shasum":"2585cafcc4cc30a89f4e9c72781a0307236930a5","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.0.1.tgz"},"_from":".","_npmVersion":"1.3.8","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.1.0":{"name":"file-utils","version":"0.1.0","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.1.0","dist":{"shasum":"0141877d85bb2562639c7178b2e629f59d5a8eff","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.1.0.tgz"},"_from":".","_npmVersion":"1.3.5","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.1.1":{"name":"file-utils","version":"0.1.1","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.1.1","dist":{"shasum":"61990c1aecda0c38c37dfdfaca018c4a99c0fc7e","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.1.1.tgz"},"_from":".","_npmVersion":"1.3.8","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.1.2":{"name":"file-utils","version":"0.1.2","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.1.2","dist":{"shasum":"99673d8aaa0efd3884ea5649cffcfc7412808e41","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.1.2.tgz"},"_from":".","_npmVersion":"1.3.8","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.1.3":{"name":"file-utils","version":"0.1.3","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.1.3","dist":{"shasum":"83e3c95d53d1f1204f6e3a2ac933b8be4f8cdae6","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.1.3.tgz"},"_from":".","_npmVersion":"1.3.5","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.1.4":{"name":"file-utils","version":"0.1.4","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2","isbinaryfile":"~0.1.9"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.1.4","dist":{"shasum":"9ecc8f7e6945a28ee0e23cefa423a8368dd099cd","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.1.4.tgz"},"_from":".","_npmVersion":"1.3.5","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.1.5":{"name":"file-utils","version":"0.1.5","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.1.0","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2","isbinaryfile":"~0.1.9"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.6.4","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.3.3"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"_id":"file-utils@0.1.5","dist":{"shasum":"dc8153c855387cb4dacb0a1725531fa444a6b48c","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.1.5.tgz"},"_from":".","_npmVersion":"1.3.5","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]},"0.2.0":{"name":"file-utils","version":"0.2.0","description":"Sync file utility for Node.js command line tools","main":"index.js","directories":{"test":"tests"},"scripts":{"test":"grunt test"},"license":"MIT","dependencies":{"lodash":"~2.4.1","iconv-lite":"~0.2.11","rimraf":"~2.2.2","glob":"~3.2.6","minimatch":"~0.2.12","findup-sync":"~0.1.2","isbinaryfile":"~2.0.0"},"devDependencies":{"temporary":"~0.0.4","grunt-contrib-jshint":"~0.8.0","grunt-contrib-nodeunit":"~0.2.0","grunt-contrib-watch":"~0.5.3","grunt-release":"~0.6.0"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"keywords":["file","utils","scaffold","tool","cli"],"author":{"name":"Simon Boudrias"},"bugs":{"url":"https://github.com/SBoudrias/file-utils/issues"},"engines":{"node":">=0.10.0"},"_id":"file-utils@0.2.0","dist":{"shasum":"0372c89b19bd96fc9a02a180c91fad29e4dbacaa","tarball":"http://registry.npmjs.org/file-utils/-/file-utils-0.2.0.tgz"},"_from":".","_npmVersion":"1.3.5","_npmUser":{"name":"sboudrias","email":"admin@simonboudrias.com"},"maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}]}},"readme":"file-utils [![](https://travis-ci.org/SBoudrias/file-utils.png)](https://travis-ci.org/SBoudrias/file-utils)\r\n==========\r\n\r\nThis is a Grunt.file forks to allow the creation of scoped file utilities and the ability to add write filters.\r\n\r\nSame as Grunt.file, this is a set of _synchronous_ utility. As so, it should **never** be used on a Node.js server. This is meant for users/command line utilities.\r\n\r\n\r\nFile API\r\n=========\r\n\r\nUpcoming. Meanwhile, check [Grunt.file documentation](http://gruntjs.com/api/grunt.file) as the same methods are available.\r\n\r\n#### Setting options - `file.option( name, [ value ])`\r\n\r\n```\r\n// Set option\r\nfile.option('write', false);\r\n\r\n// Get option\r\nfile.option('write');\r\n```\r\n\r\n**Available Options**\r\n- `write` (Boolean): If write is set to `false`, then no file will be written or deleted. Useful for test run without side effets.\r\n- `logger` (Logger object): Used internally to log information to the console. **API still work in progress**\r\n- `encoding` (String): Defaults `utf8`. Set the default encoding used for reading/writing. Note most methods allow you to overwridde it for a single run.\r\n- `force` (Boolean): `force: true` Force the deletion of folders and file outside the utility scope (or CWD if no scope).\r\n\r\n\r\nENV scope and filters\r\n=========\r\n\r\n### Creating an Env - file#createEnv([ options ]);\r\n\r\n```javascript\r\nvar file = require('file-utils');\r\n\r\nvar env = file.createEnv({\r\n  base: 'my/scoped/path',\r\n  dest: 'destination/path' // optionnal\r\n});\r\n\r\n// Alternatively, they can be functions returning a path:\r\n\r\nvar env = file.createEnv({\r\n  base: function() {\r\n    return 'my/scoped/path';\r\n  },\r\n  dest: function() { // optionnal\r\n    return 'destination/path';\r\n  }\r\n});\r\n```\r\n\r\nThe `base` directory will prefix any paths passed to `mkdir`, `recurse`, `read`, `readJSON`, `write`, `delete`, `exists`, `isLink`, `isDir` and `isFile` methods.\r\n\r\nThe `dest` directory will prefix the `destination` path provided in the `copy` method. Note that this option is optionnal and will default to the current working directory.\r\n\r\nIf [options (`logger`, `write`, etc)](#setting-options---fileoption-name--value-) are not passed, each `Env` instance inherit those of its parent.\r\n\r\nWrite Filters\r\n---------\r\n\r\nWrite filters are applied on `env.write` and `env.copy`.\r\n\r\nThey're used to modifiy the content or the filepath of a file.\r\n\r\n#### Add a write filter - `env.registerWriteFilter( name, filter )`\r\n\r\n**options**\r\n- `name` (String): The name under which registering the filter\r\n- `filter` (Function): The filter function\r\n\r\nThe filter function take a file object as parameter. This file object is a hash containing a `path` and a `contents` property. You can modify these two property as you like and returning the modified object.\r\n\r\n```javascript\r\nenv.registerWriteFilter( 'coffee', function( file ) {\r\n  if (!path.extname(file) !== '.js') return file;\r\n\r\n  file.path = file.path.replace(/(\\.js)$/, '.coffee');\r\n  file.content = convertJsToCoffee( file.contents );\r\n\r\n  return file;\r\n});\r\n```\r\n\r\n#### Remove a write filter - `env.removeWriteFilter( name )`\r\n\r\n```javascript\r\nenv.removeWriteFilter('coffee');\r\n```\r\n\r\n#### Async filter\r\n\r\nThe filter can also be asynchronous. This is done by calling `this.async()` and passing the return value to the callback provided.\r\n\r\n```javascript\r\nenv.registerWriteFilter( 'coffee', function( file ) {\r\n  var done = this.async();\r\n\r\n  // some process\r\n  setTimeout(function() {\r\n    done({ path: '/newfile', contents: 'filtered content' });\r\n  }, 1000);\r\n});\r\n```\r\n\r\n**Caution:** Using an asynchronous filter will change the way write and copy method are called to. This will make both of those method to run asynchronously too.\r\n\r\nValidation Filters\r\n----------\r\n\r\nValidation filters are applied on `env.write` and `env.copy`.\r\n\r\nThey're used to allow or disallow the write action.\r\n\r\n#### Add a validation filter - `env.registerValidationFilter( name, filter )`\r\n\r\n**options**\r\n- `name` (String): The name under which registering the filter\r\n- `filter` (Function): The filter function\r\n\r\nThe filter function take a file object as parameter. This file object is a hash containing a `path` (String) and a `contents` (String if text file, Buffer otherwise) property.\r\n\r\nReturn `true` to allow the file to be written. Return `false` or an error message `String` to disallow the write action.\r\n\r\n```javascript\r\nenv.registerValidationFilter( 'checkConflicts', function( toOutput ) {\r\n  if ( file.exists(toOutput.path) ) {\r\n    return 'file is already present';\r\n  }\r\n  return true;\r\n});\r\n```\r\n\r\nJust like the write filters, [this filter can be asynchronous](#async-filter).\r\n\r\n#### Remove a validation filter - `env.removeValidationFilter( name )`\r\n\r\n```javascript\r\nenv.removeValidationFilter('checkConflicts');\r\n```\r\n\r\n\r\nTodos\r\n=========\r\n\r\n- Real Logging system\r\n","maintainers":[{"name":"sboudrias","email":"admin@simonboudrias.com"}],"time":{"modified":"2014-01-16T21:57:57.104Z","created":"2013-10-05T19:04:54.975Z","0.0.1":"2013-10-05T19:04:56.526Z","0.1.0":"2013-10-16T00:24:38.031Z","0.1.1":"2013-10-20T00:20:12.916Z","0.1.2":"2013-10-21T01:40:48.358Z","0.1.3":"2013-11-14T22:52:18.929Z","0.1.4":"2013-11-15T20:36:40.900Z","0.1.5":"2013-11-18T19:02:21.807Z","0.2.0":"2014-01-16T21:57:57.104Z"},"author":{"name":"Simon Boudrias"},"repository":{"type":"git","url":"git://github.com/SBoudrias/file-utils.git"},"readmeFilename":"README.md","_attachments":{},"_etag":"\"226Y6G17VUFZHMBJVX9X330MU\""}